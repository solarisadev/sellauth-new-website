<div>
  <div class="testimonial">
    <div class="main">
      <div class="header">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="quote"><path fill="currentColor" d="M6.5 10c-.223 0-.437.034-.65.065c.069-.232.14-.468.254-.68c.114-.308.292-.575.469-.844c.148-.291.409-.488.601-.737c.201-.242.475-.403.692-.604c.213-.21.492-.315.714-.463c.232-.133.434-.28.65-.35l.539-.222l.474-.197l-.485-1.938l-.597.144c-.191.048-.424.104-.689.171c-.271.05-.56.187-.882.312c-.318.142-.686.238-1.028.466c-.344.218-.741.4-1.091.692c-.339.301-.748.562-1.05.945c-.33.358-.656.734-.909 1.162c-.293.408-.492.856-.702 1.299c-.19.443-.343.896-.468 1.336c-.237.882-.343 1.72-.384 2.437c-.034.718-.014 1.315.028 1.747c.015.204.043.402.063.539l.025.168l.026-.006A4.5 4.5 0 1 0 6.5 10m11 0c-.223 0-.437.034-.65.065c.069-.232.14-.468.254-.68c.114-.308.292-.575.469-.844c.148-.291.409-.488.601-.737c.201-.242.475-.403.692-.604c.213-.21.492-.315.714-.463c.232-.133.434-.28.65-.35l.539-.222l.474-.197l-.485-1.938l-.597.144c-.191.048-.424.104-.689.171c-.271.05-.56.187-.882.312c-.317.143-.686.238-1.028.467c-.344.218-.741.4-1.091.692c-.339.301-.748.562-1.05.944c-.33.358-.656.734-.909 1.162c-.293.408-.492.856-.702 1.299c-.19.443-.343.896-.468 1.336c-.237.882-.343 1.72-.384 2.437c-.034.718-.014 1.315.028 1.747c.015.204.043.402.063.539l.025.168l.026-.006A4.5 4.5 0 1 0 17.5 10"/></svg>
        <div class="stars">
          {% for i in range(0, feedback.rating) %}
          <svg xmlns="http://www.w3.org/2000/svg" fill="#FFD700" viewBox="0 0 24 24" stroke-width="1.5" stroke="#FFD700" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" />
          </svg>
          {% endfor %}
          {% for i in range(0, 5 - feedback.rating) %}
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#FFD700" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" />
          </svg>
          {% endfor %}
        </div>
      </div>

      <div class="content">
        <div class="message" x-data="{ open: false }">
          <p>
            <span>{{ feedback.message | safe | truncate(50, true, '') }}</span>
            {% if feedback.message.length > 50 %}
            <template x-if="!open">
              <a
                href="javascript:void(0)"
                @click="open = !open"
                class="text-primary link-underline-primary"
              >
                <small class="text-primary link-underline-primary"
                  >View more</small
                >
              </a>
            </template>

            <template x-if="open">
              <span>
                {{ feedback.message.slice(50) }}
                <a
                  href="javascript:void(0)"
                  @click="open = !open"
                  class="text-primary link-underline-primary"
                >
                  <small>View less</small>
                </a>
              </span>
            </template>
            {% endif %}
          </p>
        </div>
        {% if feedback.reply %}
        <div class="reply" x-data="{ open: false }">
          <p class="text">
            <span>{{ feedback.reply | safe | truncate(50, true, '') }}</span>
            {% if feedback.reply.length > 50 %}
            <template x-if="!open">
              <a
                href="javascript:void(0)"
                @click="open = !open"
                class="text-primary link-underline-primary"
              >
                <small class="text-primary link-underline-primary"
                  >View more</small
                >
              </a>
            </template>

            <template x-if="open">
              <span>
                {{ feedback.reply.slice(50) }}
                <a
                  href="javascript:void(0)"
                  @click="open = !open"
                  class="text-primary link-underline-primary"
                >
                  <small>View less</small>
                </a>
              </span>
            </template>
            {% endif %}
          </p>
          <p class="author">
            Reply from <span>{{ shop.name }}</span> - {{ feedback.replied_at | formatDate }}
          </p>
        </div>
        {% endif %}
      </div>
    </div>

    <div class="footer">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2M9.29 16.29L5.7 12.7a.996.996 0 1 1 1.41-1.41L10 14.17l6.88-6.88a.996.996 0 1 1 1.41 1.41l-7.59 7.59a.996.996 0 0 1-1.41 0"/></svg>
        <span>Verified purchase - <span class="date">{{ feedback.created_at | formatDate }}</span>.</span>
      </p>
    </div>
  </div>
</div>